<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ù…Ù†ØµØ© Ø£Ø¹Ù…Ø§Ù„ ÙˆÙ…Ø¨Ø§Ø¯Ø±Ø§Øª Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„ÙŠØ¹Ù‚ÙˆØ¨ÙŠ Ø¨Ø§Ù„Ø®Ø¨Ø±</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
:root{
  /* Ø£Ø¨Ø¹Ø§Ø¯ Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠØ© Ù…Ù† ØªØµÙ…ÙŠÙ…Ùƒ: 2048Ã—478 â‰ˆ 4.28:1 */
  --heroW:2048; --heroH:478;

  --ink:#0e3134; --muted:#5f7280; --line:#e7eff0;
  --paper:#fff; --bg:#f3f7f7; --accent:#0a8a7a;
}
*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);color:var(--ink);font-family:"Tajawal",system-ui,sans-serif}
a{color:inherit;text-decoration:none}
.container{max-width:calc(var(--heroW) * 1px); margin-inline:auto; padding:0 10px}

/* Ø§Ù„Ù‡ÙŠØ¯Ø± */
.hero{width:100%; aspect-ratio: var(--heroW) / var(--heroH); position:relative; overflow:hidden; border-radius:10px}
.hero img{position:absolute; inset:0; width:100%; height:100%; object-fit:cover; display:block; user-select:none; -webkit-user-drag:none}

/* Ø¹Ø§Ù…Ø© Ù„Ù„Ø£Ù‚Ø³Ø§Ù… */
.section{background:var(--paper); border:1px solid var(--line); border-radius:18px; padding:16px; box-shadow:0 12px 28px rgba(0,0,0,.04)}
.section h2{margin:0 0 10px; font-size:clamp(18px,2vw,22px); color:#0a4a46; display:flex; align-items:center; gap:10px}
.section h2 .tag{margin-inline-start:auto; background:#ebf5f4; color:#0a4a46; padding:3px 10px; border-radius:999px; font-size:12px}

/* ØµÙ Ù…Ù†ØµØ§Øª + Ù…Ø¨Ø§Ø¯Ø±Ø§ØªÙŠ */
.row-plat-init{display:grid; gap:12px; margin:12px 0; grid-template-columns:2fr 1fr}
@media (max-width:1100px){ .row-plat-init{grid-template-columns:1fr} }

/* Ù…Ù†ØµØ§Øª */
.toolbar{display:flex; gap:8px; flex-wrap:wrap; align-items:center; margin-bottom:10px}
.chip{border:1px solid var(--line); border-radius:999px; padding:6px 10px; font-size:13px; background:#f5fbfb; color:#0a5c58; cursor:pointer}
.chip.active{background:linear-gradient(90deg,#e8fbf5,#e9f6ff); border-color:#cfeae6}
.search{position:relative; flex:1; min-width:200px}
.search input{width:100%; border:1px solid var(--line); background:#fbfefe; padding:10px 12px; border-radius:12px; font-size:14px}
.cards{display:grid; grid-template-columns:repeat(3,1fr); gap:12px}
@media (max-width:1100px){ .cards{grid-template-columns:repeat(2,1fr)} }
@media (max-width:640px){ .cards{grid-template-columns:1fr} }

.card{
  background:linear-gradient(180deg,#ffffff,#f8fcfc);
  border:1px solid var(--line); border-radius:14px; padding:14px;
  display:grid; grid-template-columns:1fr auto; gap:8px; align-items:start;
  transition:transform .15s ease, box-shadow .2s ease;
}
.card:hover{transform:translateY(-2px); box-shadow:0 10px 22px rgba(0,0,0,.06)}
.card .title{font-weight:800; color:#064a45; font-size:15px}
.card .desc{grid-column:1 / -1; font-size:13px; color:#5f7280}
.badges{display:flex; gap:6px; flex-wrap:wrap}
.badge{font-size:11px; padding:3px 8px; border-radius:999px; border:1px solid var(--line); background:#f5fbfb; color:#0a5a56}
.actions{display:flex; gap:8px}
.btn{border:1px solid var(--line); background:#fff; padding:7px 10px; border-radius:10px; font-weight:700; font-size:12px}
.btn:hover{background:#f2faf8}
.btn.whatsapp{color:#0f8e59; border-color:#cfeadf}

/* Ø§Ù„Ø£Ø¯Ù„Ù‘Ø© ÙˆØ§Ù„Ø£Ù†Ø¸Ù…Ø© */
.columns{display:grid; grid-template-columns:1fr 1fr; gap:12px; margin:12px 0}
@media (max-width:900px){ .columns{grid-template-columns:1fr} }

/* Ù…Ø¨Ø§Ø¯Ø±Ø§ØªÙŠ (Ù‚Ø§Ø¦Ù…Ø© Ù…ÙØ±Ø¯Ø©) */
.list{display:grid; grid-template-columns:1fr; gap:12px}

/* Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© (Ù…ÙˆØ¯Ø§Ù„) */
.modal-back{position:fixed; inset:0; background:rgba(0,0,0,.35); display:none; place-items:center; z-index:50; padding:10px}
.modal{width:min(860px,96vw); background:#fff; border-radius:14px; border:1px solid var(--line); box-shadow:0 20px 60px rgba(0,0,0,.25)}
.modal header{padding:12px 14px; border-bottom:1px solid var(--line); display:flex; align-items:center; gap:8px}
.modal header h3{margin:0; font-size:16px}
.modal .body{padding:12px 14px; max-height:min(70vh,700px); overflow:auto}
.modal .grid2{display:grid; grid-template-columns:1fr 1fr; gap:10px}
.modal label{font-size:12px; color:#335}
.modal input[type=text], .modal textarea, .modal select{
  width:100%; border:1px solid var(--line); border-radius:10px; padding:8px 10px; font-family:inherit; font-size:14px; background:#fbfefe;
}
.modal textarea{min-height:80px; resize:vertical}
.modal .row{display:flex; gap:8px; flex-wrap:wrap; align-items:center; margin-top:8px}
.modal footer{padding:10px 14px; border-top:1px solid var(--line); display:flex; justify-content:space-between; gap:8px}
.kbd{background:#eef4f3; border:1px solid #d7e7e4; padding:0 6px; border-radius:6px; font-size:12px}

/* Ø§Ù„ØªØ°ÙŠÙŠÙ„ Ø§Ù„ØµØºÙŠØ± */
.footer{background:linear-gradient(90deg,#0e6462,#2f7f79); color:#e8fffb; text-align:center; padding:8px 10px; border-radius:14px; margin:16px 0; font-size:12px}
.footer b{color:#fff}
</style>
</head>
<body>

<div class="container">

  <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± Ø¨ØµÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¨Ù†Ø³Ø¨Ø© Ø«Ø§Ø¨ØªØ© Ù„Ù…Ù†Ø¹ Ø§Ù„ØªØ´ÙˆÙ‘Ù‡ -->
  <header class="hero" aria-label="Ù‡ÙŠØ¯Ø± Ø§Ù„Ù…Ù†ØµØ©">
    <img src="logo.png" alt="Ù…Ù†ØµØ© Ø£Ø¹Ù…Ø§Ù„ ÙˆÙ…Ø¨Ø§Ø¯Ø±Ø§Øª Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„ÙŠØ¹Ù‚ÙˆØ¨ÙŠ Ø¨Ø§Ù„Ø®Ø¨Ø±">
  </header>

  <!-- ØµÙ: Ù…Ù†ØµØ§Øª + Ù…Ø¨Ø§Ø¯Ø±Ø§ØªÙŠ -->
  <div class="row-plat-init">

    <!-- Ù…Ù†ØµØ§Øª ÙˆÙ…ÙˆØ§Ù‚Ø¹ ØªØ¹Ù„ÙŠÙ…ÙŠØ© -->
    <section class="section" id="platforms">
      <h2>Ù…Ù†ØµØ§Øª ÙˆÙ…ÙˆØ§Ù‚Ø¹ ØªØ¹Ù„ÙŠÙ…ÙŠØ© <span class="tag" id="countP"></span></h2>
      <div class="toolbar">
        <button class="chip active" data-filter="all">Ø§Ù„ÙƒÙ„</button>
        <button class="chip" data-filter="ÙˆØ²Ø§Ø±Ø©">ÙˆØ²Ø§Ø±Ø©</button>
        <button class="chip" data-filter="ØªØ¹Ù„Ù…">ØªØ¹Ù„Ù…</button>
        <button class="chip" data-filter="Ø¯Ø®ÙˆÙ„">Ø¯Ø®ÙˆÙ„</button>
        <div class="search"><input id="platformSearch" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØµØ© Ø£Ùˆ Ø§Ù„ÙˆØµÙâ€¦"></div>
        <button id="btnEditPlatforms" class="btn" title="ØªØ­Ø±ÙŠØ± Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØµØ§Øª">âš™ï¸ ØªØ­Ø±ÙŠØ± Ø§Ù„Ù…Ù†ØµØ§Øª</button>
      </div>
      <div class="cards" id="platformGrid"></div>
    </section>

    <!-- Ù…Ø¨Ø§Ø¯Ø±Ø§ØªÙŠ -->
    <section class="section" id="initiatives">
      <h2>Ù…Ø¨Ø§Ø¯Ø±Ø§ØªÙŠ</h2>
      <div class="list" id="initList"></div>
    </section>

  </div>

  <!-- Ø§Ù„Ø£Ø¯Ù„Ù‘Ø© ÙˆØ§Ù„Ø£Ù†Ø¸Ù…Ø© -->
  <section class="section" id="docs">
    <h2>
      Ø§Ù„Ø£Ø¯Ù„Ù‘Ø© ÙˆØ§Ù„Ø£Ù†Ø¸Ù…Ø©
      <span class="tag">Ø¹Ù…ÙˆØ¯Ø§Ù† Ù§ + Ù§</span>
      <button id="btnManageDocs" class="btn" style="margin-inline-start:auto">âš™ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¯Ù„Ù‘Ø©</button>
    </h2>
    <div class="columns" id="docsCols"></div>
  </section>

  <!-- Ø§Ù„ØªØ°ÙŠÙŠÙ„ -->
  <div class="footer">
    <b>ØªÙ†ÙÙŠØ° ÙˆØªØ¬Ù…ÙŠØ¹:</b> ÙÙ‡Ø¯ Ø­Ø§Ù…Ø¯ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ â€” Ù…Ù†ØµØ© Ø¯Ø§Ø®Ù„ÙŠØ© ØªØ±Ø¨Ø· Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ·ÙˆÙŠØ± ÙˆØ§Ù„ØªØ¹Ù„ÙŠÙ… ÙˆØ§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙÙŠ Ù…Ù†Ø¸ÙˆÙ…Ø© ÙˆØ§Ø­Ø¯Ø©.
  </div>
</div>

<!-- Ù…ÙˆØ¯Ø§Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¯Ù„Ù‘Ø© -->
<div class="modal-back" id="docsModalBack" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="docsModalTitle">
    <header>
      <h3 id="docsModalTitle">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¯Ù„Ù‘Ø© ÙˆØ§Ù„Ø£Ù†Ø¸Ù…Ø©</h3>
      <span class="kbd">PIN</span> Ù¡Ù¤Ù¤Ù§
    </header>
    <div class="body">
      <div class="row">
        <button class="btn" id="addDoc">â• Ø¥Ø¶Ø§ÙØ© Ø¯Ù„ÙŠÙ„</button>
        <button class="btn" id="resetDocs">â™»ï¸ ØªØµÙÙŠØ± (Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…Ø¨Ø¯Ø¦ÙŠ)</button>
      </div>
      <div id="docsListAdmin" style="margin-top:10px"></div>
      <hr>
      <div class="grid2">
        <div>
          <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
          <input type="text" id="docTitle">
        </div>
        <div>
          <label>Ø§Ù„Ù†ÙˆØ¹</label>
          <select id="docKind">
            <option>Ø¯Ù„ÙŠÙ„</option><option>Ù„Ø§Ø¦Ø­Ø©</option><option>Ù‚ÙˆØ§Ø¹Ø¯</option><option>Ø¢Ù„ÙŠØ©</option><option>Ù†Ù…ÙˆØ°Ø¬</option>
          </select>
        </div>
      </div>
      <div class="row">
        <div style="flex:1">
          <label>Ø§Ù„Ø±Ø§Ø¨Ø· (Ø¥Ù† ÙˆØ¬Ø¯)</label>
          <input type="text" id="docUrl" placeholder="https://â€¦">
        </div>
        <div>
          <label>Ø£Ùˆ Ø§Ø±ÙØ¹ PDF</label><br>
          <input type="file" id="docFile" accept="application/pdf">
        </div>
      </div>
      <div style="margin-top:8px">
        <label>ÙˆØµÙ Ù…Ø®ØªØµØ±</label>
        <textarea id="docDesc" placeholder="Ù…Ù„Ø®Øµ Ù…ÙˆØ¬Ø² Ù„Ù„Ø¯Ù„ÙŠÙ„â€¦"></textarea>
      </div>
    </div>
    <footer>
      <div class="row">
        <button class="btn" id="saveDoc">ğŸ’¾ Ø­ÙØ¸/ØªØ­Ø¯ÙŠØ«</button>
        <button class="btn" id="cancelDoc">Ø¥Ù„ØºØ§Ø¡</button>
      </div>
      <div class="row">
        <span style="font-size:12px;color:#6b7">Ù…Ù„Ø§Ø­Ø¸Ø©: Ù…Ù„ÙØ§Øª PDF ØªÙØ­ÙØ¸ Ù…Ø­Ù„ÙŠÙ‹Ø§ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ (Data URL). Ù„Ø§ ØªÙØ±ÙØ¹ Ù„Ø®Ø§Ø¯Ù….</span>
      </div>
    </footer>
  </div>
</div>

<!-- Ù…ÙˆØ¯Ø§Ù„ ØªØ­Ø±ÙŠØ± Ø§Ù„Ù…Ù†ØµØ§Øª -->
<div class="modal-back" id="platModalBack" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="platModalTitle">
    <header>
      <h3 id="platModalTitle">ØªØ­Ø±ÙŠØ± Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØµØ§Øª ÙˆØ§Ù„Ù…ÙˆØ§Ù‚Ø¹</h3>
      <span class="kbd">JSON</span>
    </header>
    <div class="body">
      <p style="margin:4px 0 8px; color:#456; font-size:13px">
        Ø¹Ø¯Ù‘Ù„ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø¨ØµÙŠØºØ© JSON (Ø§Ù„Ø­Ù‚ÙˆÙ„: <b>name</b>, <b>desc</b>, <b>url</b>, <b>tags</b>).
      </p>
      <textarea id="platEditor" style="width:100%; min-height:320px; border:1px solid var(--line); border-radius:10px; padding:10px; font-family:ui-monospace,mono; font-size:13px"></textarea>
    </div>
    <footer>
      <div class="row">
        <button class="btn" id="savePlat">ğŸ’¾ Ø­ÙØ¸</button>
        <button class="btn" id="resetPlat">â™»ï¸ ØªØµÙÙŠØ± Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¨Ø¯Ø¦ÙŠØ©</button>
        <button class="btn" id="cancelPlat">Ø¥ØºÙ„Ø§Ù‚</button>
      </div>
      <span style="font-size:12px;color:#6b7">ØªÙØ­ÙØ¸ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù…Ø­Ù„ÙŠÙ‹Ø§ ØªØ­Øª Ø§Ù„Ù…ÙØªØ§Ø­ platforms_custom_v1</span>
    </footer>
  </div>
</div>

<script>
/* ================= Ù…ÙØ§ØªÙŠØ­ Ø§Ù„ØªØ®Ø²ÙŠÙ† ================= */
const ADMIN_PIN = "1447";
const KEY_DOCS = "docs_custom_v1";
const KEY_PLAT = "platforms_custom_v1";

/* ================= Ø§Ù„Ù…Ù†ØµØ§Øª (Ù…Ù† Ø§Ù„Ù…Ù„Ù + ØªØ­Ø³ÙŠÙ†Ø§Øª) ================= */
const PLATFORMS_DEFAULT = [
  {name:"Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ù…ÙˆØ­Ù‘Ø¯ (IAM)", desc:"Ù†Ø¸Ø§Ù… Ø§Ù„Ù†ÙØ§Ø° Ø§Ù„Ù…ÙˆØ­Ù‘Ø¯ Ù„Ø¨ÙˆØ§Ø¨Ø§Øª ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…", url:"https://iam.moe.gov.sa/", tags:["ÙˆØ²Ø§Ø±Ø©","Ø¯Ø®ÙˆÙ„"]},
  {name:"Ù…Ø¯Ø±Ø³ØªÙŠ", desc:"Ù…Ù†ØµØ© Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ù„Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ", url:"https://schools.madrasati.sa/", tags:["ØªØ¹Ù„Ù…"]},
  {name:"Ù†ÙˆØ±", desc:"Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨", url:"https://noor.moe.gov.sa/Noor/login.aspx", tags:["ÙˆØ²Ø§Ø±Ø©","Ø¯Ø®ÙˆÙ„"]},
  {name:"Ù‚Ù†Ø§Ø© Ø¹ÙŠÙ†", desc:"Ø§Ù„Ø¨Ø« Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ ÙˆÙ…ÙƒØªØ¨Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ", url:"http://www.ientv.edu.sa/", tags:["ØªØ¹Ù„Ù…"]},
  {name:"Ø­Ø¶ÙˆØ±ÙŠ", desc:"Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø§Ù†ØµØ±Ø§Ù", url:"https://hather-ui.moe.gov.sa/dashboard", tags:["ÙˆØ²Ø§Ø±Ø©","Ø¯Ø®ÙˆÙ„"]},
  {name:"ÙØ§Ø±Ø³", desc:"Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ø°Ø§ØªÙŠØ© Ù„Ù…Ù†Ø³ÙˆØ¨ÙŠ Ø§Ù„ØªØ¹Ù„ÙŠÙ…", url:"https://sshr.moe.gov.sa/", tags:["ÙˆØ²Ø§Ø±Ø©","Ø¯Ø®ÙˆÙ„"]},
  {name:"Ù…Ù†ØµØ© Ù†ÙŠÙˆØ¨Ø¯ (FutureX)", desc:"Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ù‡Ù†ÙŠ Ø§Ù„Ø±Ù‚Ù…ÙŠ", url:"https://niepd.futurex.sa/", tags:["ØªØ¹Ù„Ù…"]},
  {name:"Outlook", desc:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ù…Ø¤Ø³Ø³ÙŠ", url:"https://outlook.office.com/mail/", tags:["Ø¯Ø®ÙˆÙ„"]},
  {name:"Ø®Ø¯Ù…Ø§ØªÙŠ", desc:"Ø¨ÙˆØ§Ø¨Ø© Ø®Ø¯Ù…Ø§Øª Ø§Ù„ØªØ¹Ù„ÙŠÙ…", url:"https://khadamati.moe.gov.sa/sp", tags:["ÙˆØ²Ø§Ø±Ø©"]},
  /* ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ©/Ø­Ø°Ù Ø¥Ø¯Ø§Ø±Ø§Øª ØªØ¹Ù„ÙŠÙ… Ù‡Ù†Ø§ Ø£Ùˆ Ù…Ù† Ù…Ø­Ø±Ø± JSON */
  {name:"Ø¥Ø¯Ø§Ø±Ø© ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø´Ø±Ù‚ÙŠØ©", desc:"Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø³Ù…ÙŠ Ù„Ø¥Ø¯Ø§Ø±Ø© ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø´Ø±Ù‚ÙŠØ©", url:"https://www.edueast.gov.sa/", tags:["ÙˆØ²Ø§Ø±Ø©"]},
  {name:"Ø¥Ø¯Ø§Ø±Ø© ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø±ÙŠØ§Ø¶", desc:"Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø³Ù…ÙŠ Ù„Ø¥Ø¯Ø§Ø±Ø© ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø±ÙŠØ§Ø¶", url:"https://www.riyadhedu.gov.sa/", tags:["ÙˆØ²Ø§Ø±Ø©"]},
  {name:"Ø¥Ø¯Ø§Ø±Ø© ØªØ¹Ù„ÙŠÙ… Ù…ÙƒØ©", desc:"Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø³Ù…ÙŠ Ù„Ø¥Ø¯Ø§Ø±Ø© ØªØ¹Ù„ÙŠÙ… Ù…ÙƒØ©", url:"https://edu.moe.gov.sa/makkah/", tags:["ÙˆØ²Ø§Ø±Ø©"]}
];

/* ================= Ø§Ù„Ø£Ø¯Ù„Ù‘Ø© ÙˆØ§Ù„Ø£Ù†Ø¸Ù…Ø© (14 Ø¹Ù†ØµØ±Ù‹Ø§) =================
   ØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ÙˆÙÙ‚ ØªØ±ØªÙŠØ¨ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ÙÙŠ Ù…Ù„Ù PDF Ø§Ù„Ø°ÙŠ Ø²ÙˆÙ‘Ø¯ØªÙ‡.
   ÙŠÙ…ÙƒÙ†Ùƒ ØªØºÙŠÙŠØ± Ø£ÙŠ Ø±Ø§Ø¨Ø· Ù„Ø§Ø­Ù‚Ù‹Ø§ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©.
*/
const DOCS_DEFAULT = [
  {title:"Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠ Ù„Ù…Ø¯Ø§Ø±Ø³ Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø¹Ø§Ù…", kind:"Ø¯Ù„ÙŠÙ„",
   url:"https://drive.google.com/file/d/1E604s0Wni9ht-UnfaB4ywlN55YyjW9Wj/view?usp=sharing",
   desc:"Ù…Ø±Ø¬Ø¹ ÙŠÙˆØ¶Ù‘Ø­ Ù…Ù‡Ø§Ù… ÙˆØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø¯Ø±Ø³Ø© ÙˆÙ‡ÙŠÙƒÙ„Ù‡Ø§ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ."},
  {title:"Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¦ÙŠ Ù„Ù…Ø¯Ø§Ø±Ø³ Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø¹Ø§Ù…", kind:"Ø¯Ù„ÙŠÙ„",
   url:"https://drive.google.com/file/d/18rVycmGYJ3vNrUq2hsAbZiDGv9WaZULR/view?usp=sharing",
   desc:"Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø¹Ù…Ù„ ÙˆØ§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ© Ù„Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØ©."},
  {title:"Ù„Ø§Ø¦Ø­Ø© ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ø·Ø§Ù„Ø¨ 2025Ù…", kind:"Ù„Ø§Ø¦Ø­Ø©",
   url:"https://drive.google.com/file/d/1jMcFdltw6SomgRAGyFQFOecvJOqF4m8-/view?usp=sharing",
   desc:"Ø£Ø³Ø§Ù„ÙŠØ¨ ÙˆØ£Ø¯ÙˆØ§Øª ÙˆØ¶ÙˆØ§Ø¨Ø· Ø§Ù„ØªÙ‚ÙˆÙŠÙ… Ù„Ø±ÙØ¹ Ù†ÙˆØ§ØªØ¬ Ø§Ù„ØªØ¹Ù„Ù‘Ù…."},
  {title:"Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠØ© Ù„Ù„Ø§Ø¦Ø­Ø© ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ø·Ø§Ù„Ø¨ 2025Ù…", kind:"Ø¯Ù„ÙŠÙ„",
   url:"https://drive.google.com/file/d/1FP2_l_4vTqbuBK7k03YktLX92TVdqDcy/view?usp=sharing",
   desc:"Ø¢Ù„ÙŠØ§Øª ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù„Ø§Ø¦Ø­Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©."},
  {title:"Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø³Ù„ÙˆÙƒ ÙˆØ§Ù„Ù…ÙˆØ§Ø¸Ø¨Ø© 1447Ù‡Ù€", kind:"Ù‚ÙˆØ§Ø¹Ø¯",
   url:"https://drive.google.com/file/d/1L5GiafAgPY0vBSQdea_obk9vKcE-t7JR/view?usp=sharing",
   desc:"Ø­Ù‚ÙˆÙ‚ ÙˆÙˆØ§Ø¬Ø¨Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ ÙˆØ¶ÙˆØ§Ø¨Ø· Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªØ±Ø¨ÙˆÙŠØ©."},
  {title:"Ø¢Ù„ÙŠØ© ØªÙ†ÙÙŠØ° Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø·Ù„Ø§Ø¨ÙŠ 1447Ù‡Ù€", kind:"Ø¢Ù„ÙŠØ©",
   url:"https://drive.google.com/file/d/1RYIYPFlAcT9Ya-RnPw3bnpQASVQIz0FX/view?usp=sharing",
   desc:"ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ ÙˆÙÙ‚ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø®Ø·Ø· Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©."},
  {title:"Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø±Ø´Ø§Ø¯ÙŠ Ù„Ù…Ø´Ø±Ù Ø¯Ø¹Ù… Ø§Ù„ØªÙ…ÙŠØ²", kind:"Ø¯Ù„ÙŠÙ„",
   url:"https://drive.google.com/file/d/1ak9uHKDbi8cPecgYzV8_cIqv2-NlmOR_/view?usp=sharing",
   desc:"ØªÙ…ÙƒÙŠÙ† Ø§Ù„Ù…Ø´Ø±Ù Ù…Ù† Ø¯Ø¹Ù… Ø§Ù„ØªÙ…ÙŠØ² ÙˆØ§Ù„Ø¬ÙˆØ¯Ø©."},
  {title:"ØªÙˆØ²ÙŠØ¹ Ø¯Ø±Ø¬Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨ 2025Ù…", kind:"Ù„Ø§Ø¦Ø­Ø©",
   url:"https://drive.google.com/file/d/1aJfnmDnFuvE5STTsZ6PIGeMJLfYG0Xcl/view?usp=sharing",
   desc:"Ø¢Ù„ÙŠØ© Ø§Ø­ØªØ³Ø§Ø¨ Ø§Ù„Ø¯Ø±Ø¬Ø§Øª Ø¨ÙŠÙ† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ÙˆØ£Ø¹Ù…Ø§Ù„ Ø§Ù„ÙØµÙ„."},
  {title:"Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª 2025Ù…", kind:"Ø¯Ù„ÙŠÙ„",
   url:"https://drive.google.com/file/d/1igqY7tNeqoEPX7YV6VqTw0GnGUWDzBNf/view?usp=sharing",
   desc:"Ø§Ù„Ø£Ø³Ø³ Ø§Ù„ÙÙ†ÙŠØ© ÙˆØ§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠØ© Ù„ØªÙ†ÙÙŠØ° Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª."},
  {title:"Ø¯Ù„ÙŠÙ„ Ø®Ø¯Ù…Ø© Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠ 2025Ù…", kind:"Ø¯Ù„ÙŠÙ„",
   url:"https://drive.google.com/file/d/1XAMG04koxiH2pd8jfVwgFTYKvGX_JqHf/view?usp=sharing",
   desc:"Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠÙ‹Ø§."},
  {title:"Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø²ÙŠ Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠ ÙˆØ§Ù„Ø±ÙŠØ§Ø¶ÙŠ Ù„Ø·Ù„Ø¨Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø¹Ø§Ù…", kind:"Ø¯Ù„ÙŠÙ„",
   url:"https://drive.google.com/file/d/1dJaj5cH6sUOpUh2shay36xH7FctVxZXh/view?usp=sharing",
   desc:"Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø© Ù„Ù„Ø²ÙŠ Ø¨Ù…Ø§ ÙŠØ¹Ø²Ø² Ø§Ù„Ù‡ÙˆÙŠØ© ÙˆØ§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø·."},
  {title:"Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…Ù‡Ù†ÙŠ Ù„Ù…ÙˆØ¸ÙÙŠ ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ… 2025", kind:"Ø¯Ù„ÙŠÙ„",
   url:"https://drive.google.com/file/d/1HbFSJb9wX4i4Bs6YDHrnF2jj8_NwYraq/view?usp=sharing",
   desc:"Ø§Ù„Ù‚ÙŠÙ… ÙˆØ§Ù„Ù…Ø¨Ø§Ø¯Ø¦ Ø§Ù„Ù…Ù‡Ù†ÙŠØ© Ù„Ø¶Ù…Ø§Ù† Ø¨ÙŠØ¦Ø© Ø¹Ù…Ù„ ØªØ±Ø¨ÙˆÙŠØ©."},
  /* Ø§Ù„Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…ØªÙÙ‚ Ø¹Ù„ÙŠÙ‡ Ø¨Ø¯Ù„ Â«Ø§Ù„Ø£Ù…Ù† Ø§Ù„ÙÙƒØ±ÙŠÂ» */
  {title:"Ø§Ø³ØªÙ…Ø§Ø±Ø© Ø§Ù„Ø²ÙŠØ§Ø±Ø© Ø§Ù„ÙÙ†ÙŠ Ù„Ù…Ø´Ø±Ù Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØ©", kind:"Ù†Ù…ÙˆØ°Ø¬",
   url:"https://drive.google.com/file/d/1Q2SnbnnteJCIgyz8WZCESV01Jk_3rPMh/view?usp=sharing",
   desc:"Ù†Ù…ÙˆØ°Ø¬ ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø²ÙŠØ§Ø±Ø©: Ù…Ø¹Ø§ÙŠÙŠØ±ØŒ Ù…Ø¤Ø´Ø±Ø§ØªØŒ ÙˆØªÙˆØµÙŠØ§Øª."},
  {title:"Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„ØªØ·ÙˆØ¹ÙŠ", kind:"Ø¯Ù„ÙŠÙ„",
   url:"https://drive.google.com/file/d/17l_qlhdWdUBRWEbDcFKT0iCkUh2gifu4/view?usp=sharing",
   desc:"ØªÙ†Ø¸ÙŠÙ… Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø·Ù„Ø§Ø¨ ÙÙŠ Ø§Ù„ØªØ·ÙˆØ¹ ÙˆØ¯Ø¹Ù… Ø±Ø¤ÙŠØ© 2030."}
];

/* ===== Ù…Ø¨Ø§Ø¯Ø±Ø§ØªÙŠ ===== */
const INITIATIVES = [
  {title:"Ø§Ø³ØªÙ…Ø§Ø±Ø© Ø¯Ø¹Ù… ÙˆØªØ·ÙˆÙŠØ± Ø§Ù„Ù‡ÙŠØ¦Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©", url:"https://fhz545-hub.github.io/teachervisit/", note:"ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„ØµÙÙ‘ÙŠØ© ÙˆÙ†Ù‚Ø§Ø· Ø§Ù„ØªØ­Ø³ÙŠÙ†."},
  {title:"Ø§Ù„Ø´Ø¤ÙˆÙ† Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ© ÙˆØ§Ù„Ù…ØªØ§Ø¨Ø¹Ø©", url:"https://fhz545-hub.github.io/teacher-eval-1447/", note:"Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø· ÙˆØ§Ù„Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¥Ø´Ø±Ø§ÙÙŠØ©."},
  {title:"Ù†Ù…ÙˆØ°Ø¬ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ", url:"https://fhz545-hub.github.io/taqyeem/", note:"Ø§Ù„ØªØ®Ø·ÙŠØ· ÙˆØ§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù†ØµÙÙŠØ© ÙˆØ§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ."},
  {title:"Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ù„Ø­Ø¸ÙŠ", url:"https://fhz545-hub.github.io/jadwal-live/", note:"Ø¬Ø¯Ø§ÙˆÙ„ ÙˆÙ…ÙˆØ§Ø¹ÙŠØ¯ ÙˆØªÙƒÙ„ÙŠÙØ§Øª Ù„Ø­Ø¸ÙŠØ©."},
  {title:"Ù†Ù…ÙˆØ°Ø¬ ØªØµÙ…ÙŠÙ… ÙˆØªÙ†ÙÙŠØ° Ø¨Ø±Ù†Ø§Ù…Ø¬/Ù†Ø´Ø§Ø·", url:"https://fhz545-hub.github.io/Report/", note:"Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØµÙ…ÙŠÙ… ÙˆØ§Ù„ØªÙˆØ«ÙŠÙ‚ Ø¨Ø§Ù„Ø£Ø«Ø±."}
];

/* ============ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ ============ */
let PLATFORMS = JSON.parse(localStorage.getItem(KEY_PLAT) || 'null') || PLATFORMS_DEFAULT;
let DOCS = JSON.parse(localStorage.getItem(KEY_DOCS) || 'null') || DOCS_DEFAULT;

/* ============ ØªÙˆÙ„ÙŠØ¯ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ù†ØµØ§Øª ============ */
const grid = document.getElementById('platformGrid');
const countP = document.getElementById('countP');
const search = document.getElementById('platformSearch');
const filterChips = [...document.querySelectorAll('.chip')];

function renderPlatforms(){
  const q = (search.value||"").trim().toLowerCase();
  const active = filterChips.find(c=>c.classList.contains('active'))?.dataset.filter || 'all';
  grid.innerHTML = ''; let shown=0;
  PLATFORMS.forEach(p=>{
    const inFilter = (active==='all') || (p.tags||[]).includes(active);
    const inSearch = !q || p.name.toLowerCase().includes(q) || (p.desc||'').toLowerCase().includes(q);
    if(inFilter && inSearch){
      shown++;
      grid.insertAdjacentHTML('beforeend', `
        <article class="card" data-tags="${(p.tags||[]).join(',')}">
          <div>
            <div class="title">${p.name}</div>
            <div class="desc">${p.desc||''}</div>
            <div class="badges">${(p.tags||[]).map(t=>`<span class="badge">${t}</span>`).join('')}</div>
          </div>
          <div class="actions">
            <a class="btn" href="${p.url}" target="_blank" rel="noopener">ÙØªØ­</a>
          </div>
        </article>
      `);
    }
  });
  countP.textContent = `${shown} Ø±Ø§Ø¨Ø·`;
}
filterChips.forEach(c=>c.addEventListener('click',()=>{filterChips.forEach(x=>x.classList.remove('active')); c.classList.add('active'); renderPlatforms();}));
search.addEventListener('input', renderPlatforms);
renderPlatforms();

/* ============ ØªÙˆÙ„ÙŠØ¯ ÙˆØ§Ø¬Ù‡Ø© Â«Ù…Ø¨Ø§Ø¯Ø±Ø§ØªÙŠÂ» ============ */
const initList = document.getElementById('initList');
INITIATIVES.forEach(it=>{
  initList.insertAdjacentHTML('beforeend', `
    <article class="card">
      <div>
        <div class="title">${it.title}</div>
        <div class="desc">${it.note||''}</div>
      </div>
      <div class="actions"><a class="btn" href="${it.url}" target="_blank" rel="noopener">ÙØªØ­</a></div>
    </article>
  `);
});

/* ============ Ø§Ù„Ø£Ø¯Ù„Ù‘Ø©: Ø¹Ø±Ø¶ + Ø¥Ø¯Ø§Ø±Ø© ============ */
const docsCols = document.getElementById('docsCols');

function linkFor(d){ return d.fileDataUrl ? d.fileDataUrl : (d.url || "#"); }

function renderDocs(){
  docsCols.innerHTML = '';
  const colA = document.createElement('div');
  const colB = document.createElement('div');
  DOCS.forEach((d,i)=>{
    const html = `
      <article class="card">
        <div>
          <div class="title">${d.title}</div>
          <div class="desc">${d.desc||''}</div>
          <div class="badges"><span class="badge">${d.kind||"Ø¯Ù„ÙŠÙ„"}</span></div>
        </div>
        <div class="actions">
          <a class="btn" href="${linkFor(d)}" target="_blank" rel="noopener">ÙØªØ­</a>
          <a class="btn whatsapp" href="https://wa.me/?text=${encodeURIComponent(d.title + ' â€” ' + (d.url||location.href))}" target="_blank" rel="noopener">ÙˆØ§ØªØ³Ø§Ø¨</a>
        </div>
      </article>`;
    (i<7?colA:colB).insertAdjacentHTML('beforeend', html);
  });
  docsCols.appendChild(colA); docsCols.appendChild(colB);
}
renderDocs();

/* ===== Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¯Ù„Ù‘Ø© ===== */
const Mback = document.getElementById('docsModalBack');
const btnManage = document.getElementById('btnManageDocs');
const listAdmin = document.getElementById('docsListAdmin');
const fTitle = document.getElementById('docTitle');
const fKind  = document.getElementById('docKind');
const fUrl   = document.getElementById('docUrl');
const fFile  = document.getElementById('docFile');
const fDesc  = document.getElementById('docDesc');
const btnAdd = document.getElementById('addDoc');
const btnSave= document.getElementById('saveDoc');
const btnCancel=document.getElementById('cancelDoc');
const btnReset= document.getElementById('resetDocs');
let editIndex = -1;

function adminList(){
  listAdmin.innerHTML = DOCS.map((d,i)=>`
    <div class="card" style="grid-template-columns:1fr auto; align-items:center">
      <div>
        <div class="title">${d.title}</div>
        <div class="desc" style="margin-top:3px">${d.desc||''}</div>
        <div class="badges" style="margin-top:6px">
          <span class="badge">${d.kind||"Ø¯Ù„ÙŠÙ„"}</span>
          ${d.fileDataUrl?`<span class="badge">PDF Ù…Ø­Ù„ÙŠ</span>`:''}
          ${d.url?`<span class="badge">Ø±Ø§Ø¨Ø· Ø®Ø§Ø±Ø¬ÙŠ</span>`:''}
        </div>
      </div>
      <div class="actions">
        <button class="btn" onclick="editDoc(${i})">ØªØ¹Ø¯ÙŠÙ„</button>
        <button class="btn" onclick="delDoc(${i})">Ø­Ø°Ù</button>
      </div>
    </div>
  `).join('');
}
function openDocsModal(){
  const ok = sessionStorage.getItem('docs_admin_ok')==='1' || prompt('Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© (PIN)')===ADMIN_PIN;
  if(!ok){return;}
  sessionStorage.setItem('docs_admin_ok','1');
  adminList();
  fTitle.value=fKind.value=fUrl.value=fDesc.value=''; fFile.value=''; editIndex=-1;
  Mback.style.display='grid';
}
function closeDocsModal(){ Mback.style.display='none'; }

btnManage.addEventListener('click', openDocsModal);
btnCancel.addEventListener('click', closeDocsModal);
btnAdd.addEventListener('click', ()=>{ editIndex=-1; fTitle.value=''; fKind.value='Ø¯Ù„ÙŠÙ„'; fUrl.value=''; fFile.value=''; fDesc.value=''; });

btnSave.addEventListener('click', async ()=>{
  const item = {title:fTitle.value.trim(), kind:fKind.value, url:fUrl.value.trim(), desc:fDesc.value.trim()};
  if(!item.title){ alert('Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ù…Ø·Ù„ÙˆØ¨'); return; }

  if(fFile.files && fFile.files[0]){
    const file = fFile.files[0];
    if(file.type !== 'application/pdf'){ alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø±ÙØ¹ PDF ÙÙ‚Ø·'); return; }
    item.fileDataUrl = await fileToDataUrl(file);
  }

  if(editIndex>=0){ DOCS[editIndex] = {...DOCS[editIndex], ...item}; }
  else{ DOCS.push(item); }

  localStorage.setItem(KEY_DOCS, JSON.stringify(DOCS));
  renderDocs(); adminList();
  fTitle.value=fKind.value=fUrl.value=fDesc.value=''; fFile.value='';
});
btnReset.addEventListener('click', ()=>{
  if(confirm('ØªØ£ÙƒÙŠØ¯ ØªØµÙÙŠØ± Ø§Ù„Ø£Ø¯Ù„Ù‘Ø© ÙˆØ§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…Ø¨Ø¯Ø¦ÙŠØŸ')) {
    localStorage.removeItem(KEY_DOCS); DOCS=[...DOCS_DEFAULT];
    renderDocs(); adminList();
  }
});
window.editDoc = (i)=>{
  editIndex=i; const d=DOCS[i];
  fTitle.value=d.title||''; fKind.value=d.kind||'Ø¯Ù„ÙŠÙ„'; fUrl.value=d.url||''; fDesc.value=d.desc||''; fFile.value='';
  document.querySelector('#docsModalBack .body').scrollTop=0;
}
window.delDoc = (i)=>{
  if(!confirm('Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¯Ù„ÙŠÙ„ØŸ')) return;
  DOCS.splice(i,1); localStorage.setItem(KEY_DOCS, JSON.stringify(DOCS));
  renderDocs(); adminList();
}
function fileToDataUrl(file){ return new Promise((res,rej)=>{ const r=new FileReader(); r.onload=()=>res(r.result); r.onerror=rej; r.readAsDataURL(file); }); }

/* ===== Ù…Ø­Ø±Ù‘Ø± Ø§Ù„Ù…Ù†ØµØ§Øª (JSON) ===== */
const Pback = document.getElementById('platModalBack');
const btnPlat = document.getElementById('btnEditPlatforms');
const txtPlat = document.getElementById('platEditor');
const btnSavePlat = document.getElementById('savePlat');
const btnResetPlat = document.getElementById('resetPlat');
const btnCancelPlat = document.getElementById('cancelPlat');

btnPlat.addEventListener('click', ()=>{
  txtPlat.value = JSON.stringify(PLATFORMS, null, 2);
  Pback.style.display='grid';
});
btnCancelPlat.addEventListener('click', ()=> Pback.style.display='none');
btnResetPlat.addEventListener('click', ()=>{
  if(confirm('Ø¥Ø±Ø¬Ø§Ø¹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØµØ§Øª Ù„Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¨Ø¯Ø¦ÙŠØŸ')){
    PLATFORMS = [...PLATFORMS_DEFAULT];
    localStorage.removeItem(KEY_PLAT);
    renderPlatforms();
    txtPlat.value = JSON.stringify(PLATFORMS, null, 2);
  }
});
btnSavePlat.addEventListener('click', ()=>{
  try{
    const parsed = JSON.parse(txtPlat.value);
    if(!Array.isArray(parsed)) throw new Error('ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù…ØµÙÙˆÙØ© Ø¹Ù†Ø§ØµØ±');
    PLATFORMS = parsed;
    localStorage.setItem(KEY_PLAT, JSON.stringify(PLATFORMS));
    renderPlatforms();
    Pback.style.display='none';
  }catch(e){ alert('JSON ØºÙŠØ± ØµØ§Ù„Ø­:\n' + e.message); }
});

/* Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§ */
document.querySelectorAll('.modal-back').forEach(back=>{
  back.addEventListener('click', (e)=>{ if(e.target===back) back.style.display='none'; });
});
</script>
</body>
</html>
